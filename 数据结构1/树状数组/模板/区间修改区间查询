#include <bits/stdc++.h>
using namespace std;

constexpr int mxn=5e5+5;

int n,m,s[mxn];
struct BIT {
    int c[2][mxn];
    int lowbit(int x) {
        return x&-x;
    }

    void update(int x,int k) {
        for (int i=x;i<=n;i+=lowbit(i)) {
            c[0][i]+=k,c[1][i]+=k*x;
        }
    }

    int query(int x) {
        int res=0;
        for (int i=x;i>0;i-=lowbit(i)) {
            res+=c[0][i]*(x+1)-c[1][i];
        }
        return res;
    }

}t;

void solve() {
    cin>>n>>m;
    for (int i=1;i<=n;i++) {
        cin>>s[i];
        t.update(i,s[i]-s[i-1]);
    }

    while (m--) {
        int opt,x,y,k;
        cin>>opt;
        if (opt==1) {
            cin>>x>>y>>k;
            t.update(x,k);
            t.update(y+1,-k);
        }else {
            cin>>x>>y;
            cout<<t.query(y)-t.query(x-1)<<'\n';
        }
    }

}
